<!DOCTYPE html>
<html>
  <head>
    <title>Admin Dashboard</title>
    <meta name="api-base-url" content="{{ API_BASE_URL }}" />
    <link rel="stylesheet" href="static/css/styles.css" />
    <link rel="stylesheet" href="static/css/admin-dashboard.css">
  </head>
  <body>
    <!-- Header -->
    <header class="dashboard-header">
      <h1 class="dashboard-title">Admin Dashboard</h1>
      <div class="header-actions">
        <button class="btn btn-secondary" onclick="goToUsers()">
          <svg
            class="icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
            />
          </svg>
          View Users
        </button>
        <button class="btn btn-primary" onclick="startNewForm()">
          <svg
            class="icon"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6v6m0 0v6m0-6h6m-6 0H6"
            />
          </svg>
          Create Form
        </button>

        <!-- LOGOUT BUTTON  -->
        <button id="logout-btn" class="view-submissions-btn">
          <i class="bi bi-box-arrow-right me-1"></i>
          Logout
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <h2 class="welcome-title">Welcome, Admin</h2>
        <!-- <p class="welcome-subtitle">Select an action from the menu.</p> -->
      </div>

      <!-- Forms Section -->
      <div class="forms-section">
        <h2 class="section-title">Existing Forms</h2>

        <!-- Error message container -->
        <div id="error-message"></div>

        <!-- Forms List -->
        <div id="form-list">
          <!-- Forms will be dynamically populated here -->
        </div>
      </div>
    </main>

    <script>
      const apiBaseUrl = document
        .querySelector('meta[name="api-base-url"]')
        .getAttribute("content");
    </script>
    <script src="static/js/fetch-forms.js"></script>

    <script>
      function startNewForm() {
        localStorage.removeItem("edit_form_id");
        window.location.href = "/form-builder";
      }

      function goToUsers() {
        window.location.href = "/manage-users";
      }

      function displayError(message) {
        const errorBox = document.getElementById("error-message");
        if (errorBox) {
          errorBox.textContent = message;
          errorBox.style.display = message ? "block" : "none";
        }
      }

      document.getElementById("logout-btn").addEventListener("click", () => {
        localStorage.removeItem("access_token");
        window.location.href = "/";
      });
    </script>
  </body>
</html>
